patterns:
  - name: multi_writer_test
    description: Test multi-writer pattern with 4 concurrent writers (one per scope) and scope-specific readers
    multi_writer: true
    
    gpu:
      num_blocks: 8
      threads_per_block: 64
      
      blocks:
        # Block 0: 4 Writers (one per scope) + Readers
        block_0:
          thread_0: {role: writer, scope: thread, ordering: release}
          thread_1: {role: writer, scope: block, ordering: release}
          thread_2: {role: writer, scope: device, ordering: release}
          thread_3: {role: writer, scope: system, ordering: release}
          
          threads_4_7: {role: reader, ordering: acquire, watch_flag: thread}
          threads_8_11: {role: reader, ordering: acquire, watch_flag: block}
          threads_12_15: {role: reader, ordering: acquire, watch_flag: device}
          threads_16_19: {role: reader, ordering: acquire, watch_flag: system}
          threads_20_63: {role: dummy_reader}
        
        # Block 1: Readers with relaxed ordering
        block_1:
          threads_0_3: {role: reader, ordering: relaxed, watch_flag: thread}
          threads_4_7: {role: reader, ordering: relaxed, watch_flag: block}
          threads_8_11: {role: reader, ordering: relaxed, watch_flag: device}
          threads_12_15: {role: reader, ordering: relaxed, watch_flag: system}
          threads_16_63: {role: dummy_reader}
        
        # Blocks 2-7: All dummy readers
        blocks_2_7:
          all_threads: {role: dummy_reader}
    
    cpu:
      num_threads: 32
      threads:
        all_threads: {role: dummy_reader}

